@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix o: <http://comvantage.eu/ontologies/iaf/2013/0/Orchestration.owl#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix adl: <http://eatld.et.tu-dresden.de/ADL#> .

## Define Input and Output blank nodes
# Inputs
_:Iparameter1 a adl:IOparameter ;
	adl:hasParameterName _:IParameterName1 ;
	adl:hasParameterType xsd:IDREFS .

_:IParameterName1 a adl:ParameterName ;
	rdfs:label "sensorProperties" .

# Outputs
_:Oparameter1 a adl:IOparameter ;
	adl:hasParameterName _:OParameterName1 ;
	adl:hasParameterType xsd:IDREFS .

_:OParameterName1 a adl:ParameterName ;
	rdfs:label "sensorProperties" .

## URI of the Generic App that is described
o:TUDLiveDataViewer-55lckd

## Add Intents
o:hasIntent	[
  o:intentPurpose	"ViewLiveData";
  o:intentString	"eu.comvantage.iaf.VIEW_LIVE_DATA"] ;

## Add Inputs and Outputs to the app
adl:hasInput [
	a adl:Input ;
	adl:hasSignature [
		a adl:Signature ;
		adl:hasIOparameter _:Iparameter1 ;
	]
] ;

adl:hasOutput [
	a adl:Output ;
	adl:hasSignature [
		a adl:Signature ;
		adl:hasIOparameter _:Oparameter1 ;
	]
] ;

## SPQARQL Templates
adl:hasSparqlTemplate [
  a adl:SparqlTemplate ;
  adl:queryString
  """
  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  
  PREFIX msem: <http://www.comvantage.eu/ontologies/mma/msem/> 
  PREFIX nasa: <http://data.nasa.gov/qudt/owl/qudt#> 

  SELECT ?uri 
  WHERE 
  { 
	  %%%sensorURI%%%  msem:transientDataQueryUri ?uri .
  }
  """ ;
  adl:queryKey "sensorQuery" ;
  adl:queryIndex 0 ;
  adl:hasPlaceholder [
    a adl:TemplatePlaceholder ;
	rdfs:label "sensorURI" ;
	]
] ;

adl:hasSparqlTemplate [
  a adl:SparqlTemplate ;
  adl:queryString
  """
  PREFIX voc: <http://www.comvantage.eu/ontologies/pec/voc/> 

  SELECT ?time ?value
  WHERE 
  {
	  ?x voc:refTime ?time. ?x voc:value ?value. 
  }
  """ ;
  adl:queryKey "dataQuery" ;
  adl:queryIndex 1
] 

## Final dot
. 

## End of description